<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mem√≥ria Arqueol√≥gica - S√≠tios de Minas Gerais</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c1810, #8b4513, #d2691e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #d4af37;
        }

        .title {
            color: #d4af37;
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .subtitle {
            font-size: 16px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .game-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .stat {
            background: linear-gradient(135deg, #d4af37, #b8860b);
            color: #000;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            min-width: 120px;
            text-align: center;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #8b4513, #cd853f);
            border: 3px solid #d4af37;
            border-radius: 15px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            user-select: none;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.matched {
            transform: rotateY(180deg);
            border-color: #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            text-align: center;
        }

        .card-back {
            background: linear-gradient(135deg, #8b4513, #cd853f);
            color: white;
        }

        .card-front {
            background: linear-gradient(135deg, #f4f4f4, #e8e8e8);
            color: #333;
            transform: rotateY(180deg);
        }

        .card-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 14px;
            font-weight: bold;
            line-height: 1.2;
        }

        .card-image {
            width: 100%;
            height: 60%;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 2px solid #d4af37;
        }

        .back-pattern {
            font-size: 60px;
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(135deg, #d4af37, #b8860b);
            border: none;
            color: #000;
            padding: 12px 24px;
            margin: 0 10px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .difficulty-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .difficulty-btn {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #d4af37;
            color: white;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.active {
            background: linear-gradient(135deg, #d4af37, #b8860b);
            color: #000;
        }

        .victory-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .victory-content {
            background: linear-gradient(135deg, #2c1810, #8b4513);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #d4af37;
            text-align: center;
            max-width: 500px;
            margin: 20px;
        }

        .victory-title {
            color: #d4af37;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .victory-stats {
            font-size: 18px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #d4af37;
            margin-bottom: 20px;
            text-align: center;
        }

        .timer {
            font-size: 24px;
            color: #d4af37;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
            }
            
            .card-icon {
                font-size: 36px;
            }
            
            .card-title {
                font-size: 12px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .game-stats {
                gap: 15px;
            }
            
            .stat {
                min-width: 100px;
                padding: 8px 15px;
                font-size: 14px;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .card:hover:not(.flipped):not(.matched) {
            animation: pulse 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 class="title">üèõÔ∏è Mem√≥ria Arqueol√≥gica</h1>
            <p class="subtitle">Descubra os pares dos S√≠tios Hist√≥ricos de Minas Gerais</p>
            
            <div class="game-stats">
                <div class="stat">
                    <div>Tempo</div>
                    <div class="timer" id="timer">00:00</div>
                </div>
                <div class="stat">
                    <div>Movimentos</div>
                    <div id="moves">0</div>
                </div>
                <div class="stat">
                    <div>Pares Encontrados</div>
                    <div id="pairs">0</div>
                </div>
                <div class="stat">
                    <div>Pontua√ß√£o</div>
                    <div id="score">0</div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <p>üéØ <strong>Como Jogar:</strong> Clique nas cartas para vir√°-las e encontre os pares dos s√≠tios arqueol√≥gicos. Cada par correto revela informa√ß√µes hist√≥ricas!</p>
        </div>

        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="setDifficulty('easy')">F√°cil (8 cartas)</button>
            <button class="difficulty-btn" onclick="setDifficulty('medium')">M√©dio (12 cartas)</button>
            <button class="difficulty-btn" onclick="setDifficulty('hard')">Dif√≠cil (14 cartas)</button>
        </div>

        <div class="controls">
            <button class="btn" onclick="startNewGame()">üéÆ Novo Jogo</button>
            <button class="btn" onclick="showHint()">üí° Dica</button>
            <button class="btn" onclick="showInfo()">‚ÑπÔ∏è Sobre os S√≠tios</button>
        </div>

        <div class="game-board" id="gameBoard"></div>
    </div>

    <div class="victory-modal" id="victoryModal">
        <div class="victory-content">
            <div class="victory-title">üèÜ Parab√©ns!</div>
            <div class="victory-stats" id="victoryStats"></div>
            <button class="btn" onclick="closeVictory()">Continuar Explorando</button>
            <button class="btn" onclick="startNewGame(); closeVictory();">Jogar Novamente</button>
        </div>
    </div>

    <script>
        let gameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            moves: 0,
            score: 0,
            startTime: null,
            gameTimer: null,
            difficulty: 'easy',
            isGameActive: false
        };

        const siteData = [
            {
                id: 'barragem',
                name: 'Barragem e Aqueduto de Pedra',
                icon: 'üèóÔ∏è',
                image: 'linear-gradient(135deg, #4a90e2, #7bb3f0)',
                info: 'Sistema hidr√°ulico colonial que controlava √°guas para minera√ß√£o e abastecimento urbano, representando a engenharia portuguesa aplicada ao Brasil.'
            },
            {
                id: 'calixto',
                name: 'Conjunto de Pontes do Calixto',
                icon: 'üåâ',
                image: 'linear-gradient(135deg, #8b4513, #cd853f)',
                info: 'Formado por 3 estruturas edificadas na primeira metade do s√©culo XIX, cadastradas no Dossi√™ de Tombamento da Estrada Real. Constru√≠das durante a reestrutura√ß√£o do caminho entre Ouro Branco e Vila Rica nos anos 1830, fazem parte das obras da Estrada do Paraibuna (1836-1860).'
            },
            {
                id: 'forno',
                name: 'Forno/Caieira',
                icon: 'üî•',
                image: 'linear-gradient(135deg, #ff6b35, #f7931e)',
                info: 'Ru√≠nas na borda da estrada de Barcelos, testemunho da produ√ß√£o de cal entre o per√≠odo colonial e imperial. Possui forma de ferradura com 3m de di√¢metro e 2,5m de altura, constru√≠do aproveitando o desn√≠vel do terreno. As paredes s√£o refor√ßadas com blocos de canga e rebocadas com argila misturada √† cal.'
            },
            {
                id: 'galeria',
                name: 'Galeria de Drenagem Serra do Itatiaia',
                icon: 'üï≥Ô∏è',
                image: 'linear-gradient(135deg, #2d5016, #4a7c59)',
                info: 'Parte do conjunto de obras da reestrutura√ß√£o da Estrada Real (1836-1860), registrada no Dossi√™ de Tombamento. Sistema de drenagem constru√≠do durante as duas etapas principais da Estrada do Paraibuna, junto com outras pontes e benfeitorias do trecho Ouro Preto - Ouro Branco.'
            },
            {
                id: 'muro',
                name: 'Muro de Pedras da Estrada Real',
                icon: 'üß±',
                image: 'linear-gradient(135deg, #8d6e63, #a1887f)',
                info: 'Obra de engenharia da reestrutura√ß√£o do trecho Ouro Branco - Ouro Preto. Inclui 500 metros de extens√£o da antiga estrada, muro de arrimo e sete estruturas de drenagem para conserva√ß√£o da estrada. H√° tamb√©m um muro de pedras em junta seca nas proximidades.'
            },
            {
                id: 'caveira',
                name: 'Ponte da Caveira',
                icon: 'üíÄ',
                image: 'linear-gradient(135deg, #424242, #616161)',
                info: 'Iniciada em novembro de 1838 pelo engenheiro Diogo Clark. Ap√≥s dois anos sofreu desmoronamento nos pared√µes devido √† m√° qualidade das pedras, sendo conclu√≠da apenas em 1850. Faz parte do Dossi√™ de Tombamento da Estrada Real e foi erguida junto com outras pontes da mesma √©poca.'
            },
            {
                id: 'arco',
                name: 'Ponte em Arco Reduzido',
                icon: 'üèõÔ∏è',
                image: 'linear-gradient(135deg, #d32f2f, #f44336)',
                info: 'Obra-prima da engenharia colonial com geometria perfeita e equil√≠brio estrutural, parte das benfeitorias da Estrada do Paraibuna constru√≠das entre 1836 e 1860.'
            }
        ];

        const difficultySettings = {
            easy: { pairs: 4, timeBonus: 1000 },
            medium: { pairs: 6, timeBonus: 1500 },
            hard: { pairs: 7, timeBonus: 2000 }
        };

        function setDifficulty(level) {
            gameState.difficulty = level;
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            startNewGame();
        }

        function createCard(site, index) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.siteId = site.id;
            card.dataset.cardIndex = index;
            
            card.innerHTML = `
                <div class="card-face card-back">
                    <div class="back-pattern">üèõÔ∏è</div>
                </div>
                <div class="card-face card-front">
                    <div class="card-image" style="background: ${site.image}; display: flex; align-items: center; justify-content: center;">
                        <div style="font-size: 48px;">${site.icon}</div>
                    </div>
                    <div class="card-title">${site.name}</div>
                </div>
            `;
            
            card.addEventListener('click', () => flipCard(card));
            return card;
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startNewGame() {
            // Reset game state
            gameState.cards = [];
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.moves = 0;
            gameState.score = 0;
            gameState.startTime = Date.now();
            gameState.isGameActive = true;
            
            // Clear existing timer
            if (gameState.gameTimer) {
                clearInterval(gameState.gameTimer);
            }
            
            // Start new timer
            gameState.gameTimer = setInterval(updateTimer, 1000);
            
            // Get sites for current difficulty
            const pairsNeeded = difficultySettings[gameState.difficulty].pairs;
            const selectedSites = siteData.slice(0, pairsNeeded);
            
            // Create pairs and shuffle
            const cardData = [...selectedSites, ...selectedSites];
            const shuffledCards = shuffleArray(cardData);
            
            // Create game board
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            
            shuffledCards.forEach((site, index) => {
                const card = createCard(site, index);
                gameBoard.appendChild(card);
                gameState.cards.push(card);
            });
            
            updateUI();
        }

        function flipCard(card) {
            if (!gameState.isGameActive || 
                card.classList.contains('flipped') || 
                card.classList.contains('matched') ||
                gameState.flippedCards.length >= 2) {
                return;
            }
            
            card.classList.add('flipped');
            gameState.flippedCards.push(card);
            
            if (gameState.flippedCards.length === 2) {
                gameState.moves++;
                setTimeout(checkMatch, 800);
            }
            
            updateUI();
        }

        function checkMatch() {
            const [card1, card2] = gameState.flippedCards;
            const site1 = card1.dataset.siteId;
            const site2 = card2.dataset.siteId;
            
            if (site1 === site2) {
                // Match found!
                card1.classList.add('matched');
                card2.classList.add('matched');
                gameState.matchedPairs++;
                gameState.score += 100;
                
                // Bonus points for quick matches
                if (gameState.moves <= gameState.matchedPairs * 2) {
                    gameState.score += 50;
                }
                
                // Show site info
                const siteInfo = siteData.find(s => s.id === site1);
                showMatchInfo(siteInfo);
                
                // Check for game completion
                if (gameState.matchedPairs === difficultySettings[gameState.difficulty].pairs) {
                    setTimeout(gameComplete, 1000);
                }
            } else {
                // No match
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                }, 500);
            }
            
            gameState.flippedCards = [];
            updateUI();
        }

        function showMatchInfo(site) {
            // Create temporary info display
            const infoDiv = document.createElement('div');
            infoDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.95);
                color: white;
                padding: 20px;
                border-radius: 15px;
                border: 3px solid #d4af37;
                z-index: 1000;
                max-width: 400px;
                text-align: center;
            `;
            
            infoDiv.innerHTML = `
                <div style="color: #d4af37; font-size: 24px; margin-bottom: 10px;">${site.icon} Par Encontrado!</div>
                <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">${site.name}</div>
                <div style="font-size: 14px; line-height: 1.4;">${site.info}</div>
            `;
            
            document.body.appendChild(infoDiv);
            
            setTimeout(() => {
                document.body.removeChild(infoDiv);
            }, 3000);
        }

        function gameComplete() {
            gameState.isGameActive = false;
            clearInterval(gameState.gameTimer);
            
            const timeElapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const timeBonus = Math.max(0, difficultySettings[gameState.difficulty].timeBonus - timeElapsed * 10);
            gameState.score += timeBonus;
            
            const victoryStats = document.getElementById('victoryStats');
            victoryStats.innerHTML = `
                <div>üéØ <strong>Jogo Completo!</strong></div>
                <div>‚è±Ô∏è Tempo: ${formatTime(timeElapsed)}</div>
                <div>üîÑ Movimentos: ${gameState.moves}</div>
                <div>‚≠ê Pontua√ß√£o Final: ${gameState.score}</div>
                <div>üèÜ Dificuldade: ${gameState.difficulty === 'easy' ? 'F√°cil' : gameState.difficulty === 'medium' ? 'M√©dio' : 'Dif√≠cil'}</div>
                <br>
                <div style="font-size: 16px; color: #d4af37;">
                    Voc√™ descobriu todos os s√≠tios arqueol√≥gicos hist√≥ricos de Minas Gerais!
                </div>
            `;
            
            document.getElementById('victoryModal').style.display = 'flex';
        }

        function updateTimer() {
            if (!gameState.isGameActive) return;
            
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            document.getElementById('timer').textContent = formatTime(elapsed);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateUI() {
            document.getElementById('moves').textContent = gameState.moves;
            document.getElementById('pairs').textContent = gameState.matchedPairs;
            document.getElementById('score').textContent = gameState.score;
        }

        function showHint() {
            if (!gameState.isGameActive || gameState.flippedCards.length > 0) return;
            
            const unmatched = gameState.cards.filter(card => 
                !card.classList.contains('matched') && !card.classList.contains('flipped')
            );
            
            if (unmatched.length >= 2) {
                // Find a matching pair
                const siteIds = unmatched.map(card => card.dataset.siteId);
                const duplicates = siteIds.filter((id, index) => siteIds.indexOf(id) !== index);
                
                if (duplicates.length > 0) {
                    const targetId = duplicates[0];
                    const matchingCards = unmatched.filter(card => card.dataset.siteId === targetId);
                    
                    matchingCards.forEach(card => {
                        card.style.border = '3px solid #00ff00';
                        setTimeout(() => {
                            card.style.border = '3px solid #d4af37';
                        }, 2000);
                    });
                    
                    gameState.score = Math.max(0, gameState.score - 25);
                    updateUI();
                }
            }
        }

        function showInfo() {
            const infoModal = document.createElement('div');
            infoModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #2c1810, #8b4513);
                padding: 30px;
                border-radius: 20px;
                border: 3px solid #d4af37;
                max-width: 600px;
                max-height: 80vh;
                overflow-y: auto;
                color: white;
            `;
            
            content.innerHTML = `
                <h2 style="color: #d4af37; text-align: center; margin-bottom: 20px;">üèõÔ∏è S√≠tios Arqueol√≥gicos de Minas Gerais</h2>
                ${siteData.map(site => `
                    <div style="margin-bottom: 15px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px;">
                        <div style="font-size: 18px; color: #d4af37; margin-bottom: 5px;">${site.icon} ${site.name}</div>
                        <div style="font-size: 14px; line-height: 1.4;">${site.info}</div>
                    </div>
                `).join('')}
                <button onclick="this.parentElement.parentElement.remove()" style="
                    background: linear-gradient(135deg, #d4af37, #b8860b);
                    border: none;
                    color: #000;
                    padding: 12px 24px;
                    border-radius: 10px;
                    cursor: pointer;
                    font-weight: bold;
                    display: block;
                    margin: 20px auto 0;
                ">Fechar</button>
            `;
            
            infoModal.appendChild(content);
            document.body.appendChild(infoModal);
        }

        function closeVictory() {
            document.getElementById('victoryModal').style.display = 'none';
        }

        // Initialize game
        startNewGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9734a11fb3fb2737',t:'MTc1NTg4OTM5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
